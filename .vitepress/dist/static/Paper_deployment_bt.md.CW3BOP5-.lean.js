import{_ as e,c as s,a3 as n,o as a}from"./chunks/framework.DUiUPaIL.js";const g=JSON.parse('{"title":"宝塔面板部署-推荐使用①/③","description":"","frontmatter":{},"headers":[],"relativePath":"Paper/deployment/bt.md","filePath":"Paper/deployment/bt.md"}'),o={name:"Paper/deployment/bt.md"};function p(c,t,l,i,r,d){return a(),s("div",null,t[0]||(t[0]=[n(`<h1 id="宝塔面板部署-推荐使用1-3" tabindex="-1">宝塔面板部署-推荐使用①/③ <a class="header-anchor" href="#宝塔面板部署-推荐使用1-3" aria-label="Permalink to &quot;宝塔面板部署-推荐使用①/③&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>提示</span></span>
<span class="line"><span>推荐服务器最低配置：CPU双核、内存4GB、硬盘20GB、带宽5兆</span></span></code></pre></div><p><strong>强烈推荐正式环境推荐使用宝塔面板部署项目，让部署更方便，减少部署出现问题。</strong></p><h2 id="服务器环境设置" tabindex="-1">服务器环境设置 <a class="header-anchor" href="#服务器环境设置" aria-label="Permalink to &quot;服务器环境设置&quot;">​</a></h2><ul><li>​<strong>步骤1</strong>​: 点击【软件商店】-&gt;【运行环境】，安装Nginx、MySQL、PHP-8.0、Redis,其中Mysql选择5.7版本。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>⚠️ 警告</span></span>
<span class="line"><span>安装软件的时候，使用极速安装，一定要使用PHP8.0和Mysql5.7，否则无法使用。</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>⚠️ 警告</span></span>
<span class="line"><span>安装软件的时候，使用极速安装，一定要使用PHP8.0和Mysql5.7，否则无法使用。</span></span></code></pre></div><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-env-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-env-2.png" alt=""></p><ul><li>​<strong>步骤2</strong>​: 点击【软件商店】-&gt;【已安装】，找到PHP-8.0，然后点击【设置】-&gt;【安装扩展】，【安装】fileinfo扩展，【安装】redis扩展。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-env-3.png" alt=""></li></ul><h2 id="站点部署​" tabindex="-1">站点部署<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E7%AB%99%E7%82%B9%E9%83%A8%E7%BD%B2" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#站点部署​" aria-label="Permalink to &quot;站点部署[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E7%AB%99%E7%82%B9%E9%83%A8%E7%BD%B2)&quot;">​</a></h2><ul><li>​<strong>步骤1</strong>​: 打开宝塔面板/www/wwwroot目录，上传下载的压缩包,解压压缩包，解压出来的文件夹就是项目目录。</li></ul><p>⚠️ 警告</p><p>注意项目目录及子目录用户要为www！如果后续步骤出现问题，重新设置一下项目目录及子目录用户为www。</p><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-1-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-1-2.png" alt=""></p><ul><li>​<strong>步骤2</strong>​: 点击【网站】-&gt;【PHP项目】-&gt;【添加站点】，【域名】项填好已解析到本服务器的域名，【根目录】选择上一步解压好的项目目录的server目录，数据库选择【MySQL】，【数据库帐号】项设置好帐号密码，【PHP版本】选择【PHP-80】，点击【提交】。</li></ul><p>⚠️ 警告</p><p>站点目录要选择server，请勿选择public，选择public会导致宝塔生成配置错误，等后面设置修改回来也无济于事，只能删除站点新添加。</p><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-2.png" alt=""></p><ul><li>​<strong>步骤3</strong>​: 保存好数据库名、用户、密码，下面步骤13需要用到。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-3.png" alt=""></li><li>​<strong>步骤4</strong>​: 找到网站，点击【设置】-&gt;【SSL】-&gt;【Let&#39;s Encrypt】-&gt;【文件验证】-&gt;【选择域名】-&gt;【申请】，申请SSL证书。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-4-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-4-2.png" alt=""></li><li>​<strong>步骤5</strong>​: 点击【网站目录】-&gt;【网站目录】，选择解压的项目目下的&quot;server&quot;目录，点击保存。【运行目录】选择&quot;/public&quot;项目，点击【保存】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-5.png" alt=""></li><li>​<strong>步骤6</strong>​: 点击【伪静态】-选择【thinkphp】，点击【保存】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-6.png" alt=""></li></ul><h3 id="程序安装​" tabindex="-1">程序安装<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E7%A8%8B%E5%BA%8F%E5%AE%89%E8%A3%85" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#程序安装​" aria-label="Permalink to &quot;程序安装[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E7%A8%8B%E5%BA%8F%E5%AE%89%E8%A3%85)&quot;">​</a></h3><ul><li>​<strong>步骤7</strong>​: 访问设置的网站，进入程序安装界面，点击【我已阅读同意】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-7-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-7-2.png" alt=""></li><li>​<strong>步骤8</strong>​: 进入此步骤，对环境进行检测，一般情况，除了【swoole_loader扩展】，其他项都会通过，说明内容可能提示【非线程安全扩展】或【线程安全扩展】，记住说明内容，下面步骤9、10、11需要用到。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-8.png" alt=""></li><li>​<strong>步骤9</strong>​: 打开宝塔文件，进入项目所在的/server/license目录，上一步说明内容如果是【非线程安全扩展】复制swoole_loader80.so文件，如果是【线程安全扩展】复制swoole_loader80_zts.so文件。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-9.png" alt=""></li><li>​<strong>步骤10</strong>​: 打开宝塔文件，进入/www/server/php/80/lib/php/extensions/no-debug-non-zts-20200930目录，粘贴文件，统一改名为swoole_loader80.so 。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-10.png" alt=""></li><li>​<strong>步骤11</strong>​: 打开【软件商店】-&gt;【运行环境】-&gt;【设置】-&gt;【配置文件】，在末尾添加<code>extension = swoole_loader80.so</code> 信息，【保存】。 <img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-11-1.png" alt=""> 打开【服务】-&gt;【重启】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-11-3.png" alt=""></li><li>​<strong>步骤12</strong>​: 回到安装界面，然后点击【重新检测】。【swoole_loader扩展】安装好以后，一般情况环境检测通过，直接点击【继续】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-12-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-12-2.png" alt=""></li><li>​<strong>步骤13</strong>​: 保存的数据库信息设置好数据库，填写Redis地址密码，没设置密码无需填写，然后设置后台管理员帐号密码，点击【继续】。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-13-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-13-2.png" alt=""></li><li>​<strong>步骤14</strong>​: 程序安装中，完成以后，可以点击【进入管理平台】，使用安装设置的帐号密码登录之前，需要添加授权文件。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-14-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/bt-14-2.png" alt=""><h3 id="授权​" tabindex="-1">授权<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E6%8E%88%E6%9D%83" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#授权​" aria-label="Permalink to &quot;授权[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E6%8E%88%E6%9D%83)&quot;">​</a></h3></li></ul><p>注意</p><p>1.授权文件与产品一一对应，如果不是同一产品，将无法使用。 2.授权文件与项目域名也是一一对应，不然无法使用。</p><ul><li>​<strong>步骤1</strong>​: 购买后源码，登录官网，下载授权文件。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/license-1.png" alt=""></li><li>​<strong>步骤2</strong>​: 添加授权文件到server/license目录，并命名为：my.license ，如果仍无法使用，请联系客服。<img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/license-2.png" alt=""></li></ul><h2 id="访问地址​" tabindex="-1">访问地址<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E8%AE%BF%E9%97%AE%E5%9C%B0%E5%9D%80" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#访问地址​" aria-label="Permalink to &quot;访问地址[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E8%AE%BF%E9%97%AE%E5%9C%B0%E5%9D%80)&quot;">​</a></h2><p>管理后台地址：<a href="https://chat-demo.likeshop.cn/admin" target="_blank" rel="noreferrer">http://域名/admin</a> PC端地址：<a href="https://chat.likeshop.cn/pc" target="_blank" rel="noreferrer">http://域名/pc</a> 手机端地址：<a href="https://chat.likeshop.cn/mobile" target="_blank" rel="noreferrer">http://域名/mobile</a></p><h2 id="定时任务​" tabindex="-1">定时任务<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#定时任务​" aria-label="Permalink to &quot;定时任务[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1)&quot;">​</a></h2><p>⚠️ 警告</p><p>定时任务不设置，会导致一些业务无法正常使用。</p><p>点击【计划任务】，设置任务类型为 【shell脚本】、填写任务名称、执行周期设置为【N分钟】【1分钟】，脚本内容为&quot;php80 项目实际目录/server/think crontab&quot;，请以项目实际域名为准，然后【添加任务】。</p><p><strong>shell</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>php80 项目实际目录/server/think crontab</span></span></code></pre></div><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/crontab.png" alt=""></p><h2 id="任务队列​" tabindex="-1">任务队列<a href="https://doc.chatmoney.cn/cp/deployment/bt.html#%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#任务队列​" aria-label="Permalink to &quot;任务队列[​](https://doc.chatmoney.cn/cp/deployment/bt.html#%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97)&quot;">​</a></h2><p>⚠️ 警告</p><p><strong>1.5.2</strong>版本开始，原写作内容生成从<strong>定时任务</strong>方式调整为<strong>任务队列</strong>的方式。 ​<strong>不配置任务队列将无法生成写作内容</strong>​，系统定时任务中的【​<strong>生成任务</strong>​】已可关闭。</p><p>注意</p><p>队列进程数量按需设置 配置成功后查看守护进程日志，无错误则配置成功。</p><ul><li><strong>步骤1</strong> 项目server文件夹下.env文件，添加队列驱动配置(驱动使用Redis)</li></ul><p><strong>shell</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[QUEUE]</span></span>
<span class="line"><span>NAME = &quot;ws&quot;</span></span>
<span class="line"><span>HOST = &quot;127.0.0.1&quot;</span></span>
<span class="line"><span>PORT = &quot;6379&quot;</span></span>
<span class="line"><span>PASSWORD = &quot;填写你的Redis密码，没有则留空&quot;</span></span></code></pre></div><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/env-set.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/redis-1.png" alt=""></p><ul><li><strong>步骤2</strong> 添加队列守护进程</li></ul><p><strong>shell</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>添加写作内容任务队列</span></span>
<span class="line"><span>php80 think queue:listen --queue maJob --timeout 0</span></span></code></pre></div><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/supervisor-2.png" alt=""></p><p><strong>shell</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>添加降重任务队列</span></span>
<span class="line"><span>php80 think queue:listen --queue reJob --timeout 0</span></span></code></pre></div><p><img src="https://doc.chatmoney.cn/docs/images/cp/deployment/bt/supervisor-1.png" alt=""></p>`,49)]))}const m=e(o,[["render",p]]);export{g as __pageData,m as default};
