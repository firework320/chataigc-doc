import{_ as a,c as e,ag as o,o as s}from"./chunks/framework.CRouwKY9.js";const g=JSON.parse('{"title":"宝塔部署①/③ 推荐使用​","description":"","frontmatter":{},"headers":[],"relativePath":"human/deployment/bt.md","filePath":"human/deployment/bt.md","lastUpdated":1741422478000}'),c={name:"human/deployment/bt.md"};function l(n,t,i,d,p,m){return s(),e("div",null,t[0]||(t[0]=[o('<h1 id="宝塔部署1-3-推荐使用​" tabindex="-1">宝塔部署①/③ 推荐使用<a href="https://doc.chatmoney.cn/dm/deployment/bt.html#%E5%AE%9D%E5%A1%94%E9%83%A8%E7%BD%B21-3" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#宝塔部署1-3-推荐使用​" aria-label="Permalink to &quot;宝塔部署①/③ 推荐使用[​](https://doc.chatmoney.cn/dm/deployment/bt.html#%E5%AE%9D%E5%A1%94%E9%83%A8%E7%BD%B21-3)&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">⚠️提示</p><p>推荐服务器最低配置：CPU双核、内存4GB、带宽5兆</p></div><div class="tip custom-block"><p class="custom-block-title">⚠️推荐</p><p>数字人系统由于大部分是视频上传下载传输、建议带宽10兆起步、或者更高</p></div><div class="tip custom-block"><p class="custom-block-title">⚠️提示</p><p>强烈推荐正式环境使用宝塔面板部署项目，让部署更方便，减少出现运行环境问题。</p></div><h2 id="服务器环境设置" tabindex="-1">服务器环境设置 <a class="header-anchor" href="#服务器环境设置" aria-label="Permalink to &quot;服务器环境设置&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">⚠️ 警告</p><p>安装软件的时候，使用极速安装，一定要使用PHP8.0和MySQL5.7，否则无法使用。</p></div><h2 id="安装运行环境需要软件" tabindex="-1">安装运行环境需要软件 <a class="header-anchor" href="#安装运行环境需要软件" aria-label="Permalink to &quot;安装运行环境需要软件&quot;">​</a></h2><p>点击【软件商店】-&gt;【运行环境】，安装Nginx、MySQL5.7、PHP-8.0、Redis。</p><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/bt-env.png" alt="www.likeadmin.cn-宝塔面板安装likeadmin运行环境"></p><h2 id="安装php扩展" tabindex="-1">安装PHP扩展 <a class="header-anchor" href="#安装php扩展" aria-label="Permalink to &quot;安装PHP扩展&quot;">​</a></h2><p>找到PHP-8.0，然后点击【设置】-&gt;【安装扩展】，【安装】fileinfo扩展，【安装】redis扩展。</p><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/php-extension.png" alt="www.likeadmin.cn-宝塔面板安装需要的PHP扩展"></p><h2 id="站点部署" tabindex="-1">站点部署 <a class="header-anchor" href="#站点部署" aria-label="Permalink to &quot;站点部署&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">添加站点</p><p>点击【网站】-&gt;【PHP项目】-&gt;【添加站点】，输入域名，填写目录、数据库等信息，点击【确定】. 然后记住数据库名、用户、密码等信息，也可以在菜单【数据库】查看，这些信息安装的时候需要用到。</p></div><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/add-site-1.png" alt="www.likeadmin.cn-宝塔面板添加网站站点"><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/add-site-2.png" alt="www.likeadmin.cn-宝塔面板添加网站站点"></p><h2 id="上传解压源码" tabindex="-1">上传解压源码 <a class="header-anchor" href="#上传解压源码" aria-label="Permalink to &quot;上传解压源码&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">⚠️ 警告</p><p>1.注意项目目录及子目录用户要为www，如果后续步骤出现问题，重新设置一下项目目录及子目录用户为www。<br> 2.压缩包为likeadmin（PHP版）或基于likeadmin（PHP版）开发的软件产品，根据自己实际部署的软件产品部署。</p></div><p>点击【文件】，找到添加站点时创建的文件夹，点击【上传】-&gt;【上传文件】，上传源码包，点击【开始上传】。然后右键点击压缩包解压。</p><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/update-code.png" alt="www.likeadmin.cn-宝塔面板上传likeadmin代码"><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/extract-code.png" alt="www.likeadmin.cn-宝塔面板解压likeadmin代码"></p><div class="info custom-block"><p class="custom-block-title">设置PHP运行目录</p><p>点击【网站】-&gt;【PHP项目】-&gt;【添加站点】-&gt;【网站目录】，设置好【网站目录】-&gt;【保存】，设置好【运行目录】-&gt;【保存】。</p></div><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/php-run-directory.png" alt="www.likeadmin.cn-宝塔面板设置likeadmin-PHP运行目录"></p><h2 id="设置站点伪静态" tabindex="-1">设置站点伪静态 <a class="header-anchor" href="#设置站点伪静态" aria-label="Permalink to &quot;设置站点伪静态&quot;">​</a></h2><p>点击【伪静态】,选择【thinkphp】，点击【保存】。设置好项目的伪静态。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/pseudo-static.png" alt="www.likeadmin.cn-宝塔面板设置thinkphp和likeadmin的伪静态"></p><h2 id="添加泛域名" tabindex="-1">添加泛域名 <a class="header-anchor" href="#添加泛域名" aria-label="Permalink to &quot;添加泛域名&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">提示</p><p>SaaS系统支持无限添加租户，所有租户默认会分配一个随机的二级域名，所以需要添加泛域名解析。</p></div><ul><li><p><strong>步骤1</strong>:<br> 在域名购买服务商控制台添加域名解析，记录类型为<code>A</code>，主机记录为<code>*</code>，记录值为服务器的IP地址。</p></li><li><p><strong>步骤2</strong>:<br> 找到站点，点击【设置】-&gt;【域名管理】，填写泛域名，泛域名为<code>*</code>开头，格式如<code>*.likeadmin.cn</code>，然后【添加】即可。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/add-wildcard-domain.png" alt="宝塔添加泛域名"></p></li></ul><h2 id="设置ssl证书-https-​" tabindex="-1">设置SSL证书（https）<a href="https://doc.chatmoney.cn/dm/deployment/bt.html#%E8%AE%BE%E7%BD%AEssl%E8%AF%81%E4%B9%A6-https" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#设置ssl证书-https-​" aria-label="Permalink to &quot;设置SSL证书（https）[​](https://doc.chatmoney.cn/dm/deployment/bt.html#%E8%AE%BE%E7%BD%AEssl%E8%AF%81%E4%B9%A6-https)&quot;">​</a></h2><ul><li><strong>步骤1</strong>:<br> 点击【面板设置】-&gt;【面板设置】，开启SSL菜单。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/set-ssl-menu.png" alt=""></li><li><strong>步骤2</strong>:</li></ul><p>点击【SSL】-&gt;【域名管理】-&gt;【添加DNS接口】，验证类型选择域名所在的服务商，并填写服务商的AccessKey和Secretkey。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/set-dns.png" alt=""></p><ul><li><strong>步骤3</strong>:<br> 点击该站点的【设置】-&gt;【SSL】—&gt;【Let&#39;s Encrypt】-&gt;【DNS验证支持通配符】-&gt;【自动组合泛域名】-&gt;【全选】-&gt;【配置DNS】，验证类型选择上步骤添加的DNS接口，点击【确定】-&gt;【申请证书】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-ssl.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/ssl-success.png" alt=""></li></ul><h2 id="程序安装" tabindex="-1">程序安装 <a class="header-anchor" href="#程序安装" aria-label="Permalink to &quot;程序安装&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">注意</p><p>likeadmin 本身是免费开源的，采用 MIT 许可证，允许任意商业用途，可以用于二次开发以制作项目和产品。然而，基于 Likeadmin 开发的产品软件是否可以商用，请咨询具体软件产品的软件开发者，以免引发法律问题。</p></div><ul><li><p><strong>步骤1</strong>:<br> 访问站点域名，点击【我已阅读并同意】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-1.png" alt="www.likeadmin.cn-likeadmin安装"></p></li><li><p><strong>步骤2</strong>:<br> 检查运行环境，如果不符合，请按界面提示修改运行环境，除了【swoole_loader扩展】，其他项都会通过，说明内容可能提示【非线程安全扩展】或【线程安全扩展】，记住说明内容，下面步骤需要用到。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-2.png" alt="www.likeadmin.cn-likeadmin安装"></p></li><li><p><strong>步骤3</strong>:<br> 打开宝塔文件，进入项目所在的/server/license目录，上一步说明内容如果是【非线程安全扩展】复制swoole_loader80.so文件，如果是【线程安全扩展】复制swoole_loader80_zts.so文件。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/copy-swoole_loader.png" alt="码多多AI安装"></p></li><li><p><strong>步骤4</strong>:<br> 打开宝塔文件，进入/www/server/php/80/lib/php/extensions/no-debug-non-zts-20200930目录，粘贴文件，统一改名为swoole_loader80.so 。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/paste-swoole_loader.png" alt="码多多AI数字人SaaS安装"></p></li><li><p><strong>步骤5</strong>:<br> 打开【软件商店】-&gt;【运行环境】-&gt;【设置】-&gt;【配置文件】，在末尾添加<code>extension = swoole_loader80.so</code>信息，点击【保存】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/config-swoole_loader.png" alt="码多多AI数字人SaaS安装"></p></li><li><p><strong>步骤6</strong>:<br> 打开【服务】-&gt;【重启】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/restart-php.png" alt="码多多AI数字人SaaS安装"></p></li><li><p><strong>步骤7</strong>:<br> 回到安装界面以后，点击【重新检测】后，点击【继续】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-3.png" alt="码多多AI数字人SaaS安装"></p></li><li><p><strong>步骤8</strong>:<br> 填写上面步骤记录的数据库信息，设置好SaaS平台超级管理员账号密码，然后点击【继续】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-4.png" alt="码多多AI数字人SaaS安装"><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-5.png" alt="码多多AI数字人SaaS安装"><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/install-6.png" alt="码多多AI数字人SaaS安装"></p></li></ul><h2 id="访问地址" tabindex="-1">访问地址 <a class="header-anchor" href="#访问地址" aria-label="Permalink to &quot;访问地址&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>1.程序安装的时候使用的域名，会设置为平台域名。如需修改，请修改<code>server/.env</code>的<code>HTTP_HOST</code>值。<br> 2.租户添加后，默认会生成主域名下的随机二级域名。</p></div><div class="info custom-block"><p class="custom-block-title">访问地址​</p><ul><li>平台后台访问：<a href="http://xn--eqrt2g/platform" target="_blank" rel="noreferrer">http://域名/platform</a></li><li>租户域名访问：<a href="http://xn--eqrt2g72lduy/admin" target="_blank" rel="noreferrer">http://租户域名/admin</a></li><li>租户移动端访问：<a href="http://xn--eqrt2g72lduy/mobile" target="_blank" rel="noreferrer">http://租户域名/mobile</a></li><li>租户PC访问：<a href="http://xn--eqrt2g72lduy/pc" target="_blank" rel="noreferrer">http://租户域名/pc</a></li></ul></div><h2 id="定时任务" tabindex="-1">定时任务 <a class="header-anchor" href="#定时任务" aria-label="Permalink to &quot;定时任务&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>为了保障系统业务可以正常运行，需要配置定时任务。</p></div><h2 id="设置定时任务" tabindex="-1">设置定时任务 <a class="header-anchor" href="#设置定时任务" aria-label="Permalink to &quot;设置定时任务&quot;">​</a></h2><p>点击【计划任务】-&gt;【添加任务】，任务类型选择【访问URL-GET】，执行周期选择【N分钟】，填写【1】分钟，URL填写<code>https://实际域名/crontab</code>，点击【确定】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/set-crontab.png" alt="likeadmin宝塔配置定时任务"></p><h2 id="验证定时任务" tabindex="-1">验证定时任务 <a class="header-anchor" href="#验证定时任务" aria-label="Permalink to &quot;验证定时任务&quot;">​</a></h2><p>登录管理后台，点击【系统设置】-&gt;【系统维护】-&gt;【定时任务】，在定时任务列表中，任意一个定时任务执行时间为今天，则说明配置成功。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/cat-crontab.png" alt="likeadmin宝塔配置定时任务"></p><h2 id="设置租户域名别名" tabindex="-1">设置租户域名别名 <a class="header-anchor" href="#设置租户域名别名" aria-label="Permalink to &quot;设置租户域名别名&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>某些业务场景下，租户需要使用自己的独立域名，平台后台支持给租户设置一个域名别名。</p></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p>多个租户设置域名别名，重复此步骤即可。</p></div><h2 id="解析与添加域名别名" tabindex="-1">解析与添加域名别名 <a class="header-anchor" href="#解析与添加域名别名" aria-label="Permalink to &quot;解析与添加域名别名&quot;">​</a></h2><ul><li><p><strong>步骤1</strong>:<br> 登录平台后台，点击【租户列表】-&gt;【详情】，复制租户默认域名。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-2.png" alt=""></p></li><li><p><strong>步骤2</strong>:<br> 在域名服务商添加域名解析，将自定义的域名添加<code>CNAME</code>解析，记录值填写租户默认域名。</p></li><li><p><strong>步骤3</strong>:<br> 点击【编辑】，选择【启用】别名，填写想要自定义的域名，然后【保存】。<img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/add-domain-alias-1.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/add-domain-alias-2.png" alt=""></p></li></ul><h2 id="宝塔配置域名别名" tabindex="-1">宝塔配置域名别名 <a class="header-anchor" href="#宝塔配置域名别名" aria-label="Permalink to &quot;宝塔配置域名别名&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>通常情况下，域名别名的证书和Saas默认域名不一样，所以需要另外添加。</p></div><div class="info custom-block"><p class="custom-block-title"><strong>步骤1</strong>:</p><p>点击【网站】-&gt;【PHP项目】-&gt;【添加站点】-&gt;【传统项目】，输入域名，根目录填写原来项目下的<code>server</code>目录，PHP版本选择8.0，点击【确定】。</p></div><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-site-1.png" alt=""></p><div class="info custom-block"><p class="custom-block-title"><strong>步骤2</strong>:</p><p>点击站点的【设置】-&gt;【网站目录】，运行目录设置<code>public</code>,然后【保存】。</p></div><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-site-2.png" alt=""></p><div class="info custom-block"><p class="custom-block-title"><strong>步骤3</strong>:</p><p>点击【SSL】-&gt;【Let&#39;s Encrypt】-&gt;【文件验证】-&gt;【全选】-&gt;【申请证书】，申请成功以后，访问域名即可到对应的租户。</p></div><p><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-site-3.png" alt=""><img src="https://doc.chatmoney.cn/docs/images/dm/deployment/bt/get-domain-alias-site-4.png" alt=""></p>',55)]))}const h=a(c,[["render",l]]);export{g as __pageData,h as default};
